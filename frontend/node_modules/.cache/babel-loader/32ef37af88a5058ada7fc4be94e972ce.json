{"ast":null,"code":"import _asyncToGenerator from\"/home/carlos/Documents/GitHub/mern-ecommerce/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/carlos/Documents/GitHub/mern-ecommerce/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"/home/carlos/Documents/GitHub/mern-ecommerce/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/home/carlos/Documents/GitHub/mern-ecommerce/frontend/node_modules/@babel/runtime/regenerator/index.js\";import Axios from'axios';import React,{useState,useEffect,useReducer,useContext}from'react';import{Helmet}from'react-helmet-async';import Button from'react-bootstrap/Button';import Form from'react-bootstrap/Form';import{useNavigate,useParams}from'react-router-dom';import{toast}from'react-toastify';import LoadingBox from'../components/LoadingBox';import MessageBox from'../components/MessageBox';import{Store}from'../Store';import{getError}from'../utils';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var reducer=function reducer(state,action){switch(action.type){case'FETCH_REQUEST':return _objectSpread(_objectSpread({},state),{},{loading:true});case'FETCH_SUCCESS':return _objectSpread(_objectSpread({},state),{},{loading:false});case'FETCH_FAIL':return _objectSpread(_objectSpread({},state),{},{loading:false,error:action.payload});case'UPDATE_REQUEST':return _objectSpread(_objectSpread({},state),{},{loadingUpdate:true});case'UPDATE_SUCCESS':return _objectSpread(_objectSpread({},state),{},{loadingUpdate:false});case'UPDATE_FAIL':return _objectSpread(_objectSpread({},state),{},{loadingUpdate:false});default:return state;}};export default function UserEditScreen(props){var _useContext=useContext(Store),state=_useContext.state;var userInfo=state.userInfo;var _useReducer=useReducer(reducer,{loading:true,error:''}),_useReducer2=_slicedToArray(_useReducer,2),_useReducer2$=_useReducer2[0],loading=_useReducer2$.loading,error=_useReducer2$.error,loadingUpdate=_useReducer2$.loadingUpdate,dispatch=_useReducer2[1];var navigate=useNavigate();var params=useParams();var userId=params.id;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isSeller=_useState6[0],setIsSeller=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isAdmin=_useState8[0],setIsAdmin=_useState8[1];useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$Axios$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch({type:'FETCH_REQUEST'});_context.prev=1;_context.next=4;return Axios.get(\"/api/users/\".concat(userId),{headers:{Authorization:\"Bearer \".concat(userInfo.token)}});case 4:_yield$Axios$get=_context.sent;data=_yield$Axios$get.data;setName(data.name);setEmail(data.email);setIsSeller(data.isSeller);setIsAdmin(data.isAdmin);dispatch({type:'FETCH_SUCCESS'});_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](1);dispatch({type:'FETCH_FAIL',payload:getError(_context.t0)});case 16:case\"end\":return _context.stop();}}},_callee,null,[[1,13]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[dispatch,userId,userInfo]);var submitHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();dispatch({type:'UPDATE_REQUEST'});_context2.prev=2;_context2.next=5;return Axios.put(\"/api/users/\".concat(userId),{_id:userId,name:name,email:email,isSeller:isSeller,isAdmin:isAdmin},{headers:{Authorization:\"Bearer \".concat(userInfo.token)}});case 5:dispatch({type:'UPDATE_SUCCESS'});toast.success('User updated successfully');navigate('/userlist');_context2.next=14;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](2);toast.error(getError(_context2.t0));dispatch({type:'UPDATE_FAIL'});case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[2,10]]);}));return function submitHandler(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"container small-container\",children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsxs(\"title\",{children:[\"Edit User \",userId]})}),/*#__PURE__*/_jsxs(\"h1\",{className:\"my-3\",children:[\"Edit User \",userId]}),loading?/*#__PURE__*/_jsx(LoadingBox,{}):error?/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"name\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Name\"}),/*#__PURE__*/_jsx(Form.Control,{value:name,onChange:function onChange(e){return setName(e.target.value);},required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"name\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email\"}),/*#__PURE__*/_jsx(Form.Control,{value:email,onChange:function onChange(e){return setEmail(e.target.value);},required:true})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"name\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email\"}),/*#__PURE__*/_jsx(Form.Control,{value:email,onChange:function onChange(e){return setEmail(e.target.value);},required:true})]}),/*#__PURE__*/_jsx(Form.Check,{className:\"mb-3\",type:\"checkbox\",id:\"isAdmin\",label:\"isAdmin\",checked:isAdmin,onChange:function onChange(e){return setIsAdmin(e.target.checked);}}),/*#__PURE__*/_jsx(Form.Check,{className:\"mb-3\",type:\"checkbox\",id:\"isSeller\",label:\"isSeller\",checked:isSeller,onChange:function onChange(e){return setIsSeller(e.target.checked);}}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(Button,{type:\"submit\",disabled:loadingUpdate,children:\"Update\"})}),loadingUpdate&&/*#__PURE__*/_jsx(LoadingBox,{})]})]});}","map":{"version":3,"sources":["/home/carlos/Documents/GitHub/mern-ecommerce/frontend/src/screens/UserEditScreen.js"],"names":["Axios","React","useState","useEffect","useReducer","useContext","Helmet","Button","Form","useNavigate","useParams","toast","LoadingBox","MessageBox","Store","getError","reducer","state","action","type","loading","error","payload","loadingUpdate","UserEditScreen","props","userInfo","dispatch","navigate","params","userId","id","name","setName","email","setEmail","isSeller","setIsSeller","isAdmin","setIsAdmin","fetchData","get","headers","Authorization","token","data","submitHandler","e","preventDefault","put","_id","success","target","value","checked"],"mappings":"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","sourcesContent":["import Axios from 'axios';\nimport React, { useState, useEffect, useReducer, useContext } from 'react';\nimport { Helmet } from 'react-helmet-async';\nimport Button from 'react-bootstrap/Button';\nimport Form from 'react-bootstrap/Form';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport LoadingBox from '../components/LoadingBox';\nimport MessageBox from '../components/MessageBox';\nimport { Store } from '../Store';\nimport { getError } from '../utils';\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case 'FETCH_REQUEST':\n      return { ...state, loading: true };\n    case 'FETCH_SUCCESS':\n      return { ...state, loading: false };\n    case 'FETCH_FAIL':\n      return { ...state, loading: false, error: action.payload };\n    case 'UPDATE_REQUEST':\n      return { ...state, loadingUpdate: true };\n    case 'UPDATE_SUCCESS':\n      return { ...state, loadingUpdate: false };\n    case 'UPDATE_FAIL':\n      return { ...state, loadingUpdate: false };\n\n    default:\n      return state;\n  }\n};\n\nexport default function UserEditScreen(props) {\n  const { state } = useContext(Store);\n  const { userInfo } = state;\n  const [{ loading, error, loadingUpdate }, dispatch] = useReducer(reducer, {\n    loading: true,\n    error: '',\n  });\n  const navigate = useNavigate();\n  const params = useParams();\n  const { id: userId } = params;\n\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [isSeller, setIsSeller] = useState(false);\n  const [isAdmin, setIsAdmin] = useState(false);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      dispatch({ type: 'FETCH_REQUEST' });\n      try {\n        const { data } = await Axios.get(`/api/users/${userId}`, {\n          headers: { Authorization: `Bearer ${userInfo.token}` },\n        });\n\n        setName(data.name);\n        setEmail(data.email);\n        setIsSeller(data.isSeller);\n        setIsAdmin(data.isAdmin);\n        dispatch({ type: 'FETCH_SUCCESS' });\n      } catch (error) {\n        dispatch({\n          type: 'FETCH_FAIL',\n          payload: getError(error),\n        });\n      }\n    };\n    fetchData();\n  }, [dispatch, userId, userInfo]);\n\n  const submitHandler = async (e) => {\n    e.preventDefault();\n    dispatch({ type: 'UPDATE_REQUEST' });\n    try {\n      await Axios.put(\n        `/api/users/${userId}`,\n        { _id: userId, name, email, isSeller, isAdmin },\n        {\n          headers: { Authorization: `Bearer ${userInfo.token}` },\n        }\n      );\n      dispatch({\n        type: 'UPDATE_SUCCESS',\n      });\n      toast.success('User updated successfully');\n      navigate('/userlist');\n    } catch (error) {\n      toast.error(getError(error));\n      dispatch({ type: 'UPDATE_FAIL' });\n    }\n  };\n\n  return (\n    <div className=\"container small-container\">\n      <Helmet>\n        <title>Edit User {userId}</title>\n      </Helmet>\n      <h1 className=\"my-3\">Edit User {userId}</h1>\n      {loading ? (\n        <LoadingBox></LoadingBox>\n      ) : error ? (\n        <MessageBox variant=\"danger\">{error}</MessageBox>\n      ) : (\n        <form onSubmit={submitHandler}>\n          <Form.Group className=\"mb-3\" controlId=\"name\">\n            <Form.Label>Name</Form.Label>\n            <Form.Control\n              value={name}\n              onChange={(e) => setName(e.target.value)}\n              required\n            />\n          </Form.Group>\n          <Form.Group className=\"mb-3\" controlId=\"name\">\n            <Form.Label>Email</Form.Label>\n            <Form.Control\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              required\n            />\n          </Form.Group>\n          <Form.Group className=\"mb-3\" controlId=\"name\">\n            <Form.Label>Email</Form.Label>\n            <Form.Control\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              required\n            />\n          </Form.Group>\n\n          <Form.Check\n            className=\"mb-3\"\n            type=\"checkbox\"\n            id=\"isAdmin\"\n            label=\"isAdmin\"\n            checked={isAdmin}\n            onChange={(e) => setIsAdmin(e.target.checked)}\n          />\n\n          <Form.Check\n            className=\"mb-3\"\n            type=\"checkbox\"\n            id=\"isSeller\"\n            label=\"isSeller\"\n            checked={isSeller}\n            onChange={(e) => setIsSeller(e.target.checked)}\n          />\n\n          <div className=\"mb-3\">\n            <Button type=\"submit\" disabled={loadingUpdate}>\n              Update\n            </Button>\n          </div>\n          {loadingUpdate && <LoadingBox></LoadingBox>}\n        </form>\n      )}\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}