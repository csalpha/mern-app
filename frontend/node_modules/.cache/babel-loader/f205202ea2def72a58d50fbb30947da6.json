{"ast":null,"code":"import _asyncToGenerator from\"/home/carlos/Documents/GitHub/mern-ecommerce/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/carlos/Documents/GitHub/mern-ecommerce/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"/home/carlos/Documents/GitHub/mern-ecommerce/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/home/carlos/Documents/GitHub/mern-ecommerce/frontend/node_modules/@babel/runtime/regenerator/index.js\";import React,{useEffect,useReducer}from'react';import Row from'react-bootstrap/Row';import Col from'react-bootstrap/Col';import'react-responsive-carousel/lib/styles/carousel.min.css';import{Carousel}from'react-responsive-carousel';import Product from'../components/Product';import LoadingBox from'../components/LoadingBox';import MessageBox from'../components/MessageBox';import{Link}from'react-router-dom';import Axios from'axios';import{getError}from'../utils';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var reducer=function reducer(state,action){switch(action.type){case'FETCH_REQUEST':return _objectSpread(_objectSpread({},state),{},{loading:true});case'FETCH_SUCCESS':return _objectSpread(_objectSpread({},state),{},{products:action.payload.products,sellers:action.payload.sellers,loading:false});case'FETCH_FAIL':return _objectSpread(_objectSpread({},state),{},{loading:false,error:action.payload});default:return state;}};export default function HomeScreen(){var _useReducer=useReducer(reducer,{loading:true,error:''}),_useReducer2=_slicedToArray(_useReducer,2),_useReducer2$=_useReducer2[0],loading=_useReducer2$.loading,error=_useReducer2$.error,products=_useReducer2$.products,sellers=_useReducer2$.sellers,dispatch=_useReducer2[1];useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$Axios$get,_products,_yield$Axios$get2,_sellers;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch({type:'FETCH_REQUEST'});_context.prev=1;_context.next=4;return Axios.get('/api/products/top-products');case 4:_yield$Axios$get=_context.sent;_products=_yield$Axios$get.data;_context.next=8;return Axios.get('/api/users/top-sellers');case 8:_yield$Axios$get2=_context.sent;_sellers=_yield$Axios$get2.data;dispatch({type:'FETCH_SUCCESS',payload:{products:_products,sellers:_sellers}});_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](1);dispatch({type:'FETCH_FAIL',payload:getError(_context.t0)});case 16:case\"end\":return _context.stop();}}},_callee,null,[[1,13]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[dispatch]);return/*#__PURE__*/_jsx(\"div\",{children:loading?/*#__PURE__*/_jsx(LoadingBox,{}):error?/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(_Fragment,{children:[sellers.length===0&&/*#__PURE__*/_jsx(MessageBox,{children:\"No Seller Found\"}),/*#__PURE__*/_jsx(Carousel,{showArrows:true,autoPlay:true,showThumbs:false,children:sellers.map(function(seller){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Link,{to:\"/seller/\".concat(seller._id),children:[/*#__PURE__*/_jsx(\"img\",{src:seller.seller.logo,alt:seller.seller.name}),/*#__PURE__*/_jsx(\"p\",{className:\"legend\",children:seller.seller.name})]})},seller._id);})}),/*#__PURE__*/_jsx(\"h2\",{children:\"Featured Products\"}),products.length===0&&/*#__PURE__*/_jsx(MessageBox,{children:\"No Product Found\"}),/*#__PURE__*/_jsx(Row,{children:products.map(function(product){return/*#__PURE__*/_jsx(Col,{sm:6,md:4,lg:3,className:\"mb-3\",children:/*#__PURE__*/_jsx(Product,{product:product})},product._id);})})]})});}","map":{"version":3,"sources":["/home/carlos/Documents/GitHub/mern-ecommerce/frontend/src/screens/HomeScreen.js"],"names":["React","useEffect","useReducer","Row","Col","Carousel","Product","LoadingBox","MessageBox","Link","Axios","getError","reducer","state","action","type","loading","products","payload","sellers","error","HomeScreen","dispatch","fetchData","get","data","length","map","seller","_id","logo","name","product"],"mappings":"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","sourcesContent":["import React, { useEffect, useReducer } from 'react';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport 'react-responsive-carousel/lib/styles/carousel.min.css';\nimport { Carousel } from 'react-responsive-carousel';\nimport Product from '../components/Product';\nimport LoadingBox from '../components/LoadingBox';\nimport MessageBox from '../components/MessageBox';\nimport { Link } from 'react-router-dom';\nimport Axios from 'axios';\nimport { getError } from '../utils';\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case 'FETCH_REQUEST':\n      return { ...state, loading: true };\n    case 'FETCH_SUCCESS':\n      return {\n        ...state,\n        products: action.payload.products,\n        sellers: action.payload.sellers,\n        loading: false,\n      };\n    case 'FETCH_FAIL':\n      return { ...state, loading: false, error: action.payload };\n\n    default:\n      return state;\n  }\n};\n\nexport default function HomeScreen() {\n  const [{ loading, error, products, sellers }, dispatch] = useReducer(\n    reducer,\n    {\n      loading: true,\n      error: '',\n    }\n  );\n\n  useEffect(() => {\n    const fetchData = async () => {\n      dispatch({ type: 'FETCH_REQUEST' });\n      try {\n        const { data: products } = await Axios.get(\n          '/api/products/top-products'\n        );\n        const { data: sellers } = await Axios.get('/api/users/top-sellers');\n        dispatch({ type: 'FETCH_SUCCESS', payload: { products, sellers } });\n      } catch (error) {\n        dispatch({\n          type: 'FETCH_FAIL',\n          payload: getError(error),\n        });\n      }\n    };\n\n    fetchData();\n  }, [dispatch]);\n\n  return (\n    <div>\n      {loading ? (\n        <LoadingBox></LoadingBox>\n      ) : error ? (\n        <MessageBox variant=\"danger\">{error}</MessageBox>\n      ) : (\n        <>\n          {sellers.length === 0 && <MessageBox>No Seller Found</MessageBox>}\n          <Carousel showArrows autoPlay showThumbs={false}>\n            {sellers.map((seller) => (\n              <div key={seller._id}>\n                <Link to={`/seller/${seller._id}`}>\n                  <img src={seller.seller.logo} alt={seller.seller.name} />\n                  <p className=\"legend\">{seller.seller.name}</p>\n                </Link>\n              </div>\n            ))}\n          </Carousel>\n          <h2>Featured Products</h2>\n          {products.length === 0 && <MessageBox>No Product Found</MessageBox>}\n          <Row>\n            {products.map((product) => (\n              <Col sm={6} md={4} lg={3} key={product._id} className=\"mb-3\">\n                <Product product={product}></Product>\n              </Col>\n            ))}\n          </Row>\n        </>\n      )}\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}