{"ast":null,"code":"import _asyncToGenerator from\"/home/carlos/Documents/GitHub/mern-ecommerce/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/carlos/Documents/GitHub/mern-ecommerce/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"/home/carlos/Documents/GitHub/mern-ecommerce/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/home/carlos/Documents/GitHub/mern-ecommerce/frontend/node_modules/@babel/runtime/regenerator/index.js\";import Axios from'axios';import React,{useEffect,useReducer}from'react';import Col from'react-bootstrap/Col';import Card from'react-bootstrap/Card';import Row from'react-bootstrap/Row';import{useParams}from'react-router-dom';import LoadingBox from'../components/LoadingBox';import MessageBox from'../components/MessageBox';import Product from'../components/Product';import Rating from'../components/Rating';import{getError}from'../utils';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var reducer=function reducer(state,action){switch(action.type){case'FETCH_REQUEST':return _objectSpread(_objectSpread({},state),{},{loading:true});case'FETCH_SUCCESS':return _objectSpread(_objectSpread({},state),{},{user:action.payload.user,products:action.payload.products,loading:false});case'FETCH_FAIL':return _objectSpread(_objectSpread({},state),{},{loading:false,error:action.payload});default:return state;}};export default function SellerScreen(){var _useReducer=useReducer(reducer,{loading:true,error:''}),_useReducer2=_slicedToArray(_useReducer,2),_useReducer2$=_useReducer2[0],loading=_useReducer2$.loading,error=_useReducer2$.error,products=_useReducer2$.products,user=_useReducer2$.user,dispatch=_useReducer2[1];var params=useParams();var sellerId=params.id;useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$Axios$get,_user,_yield$Axios$get2,_products;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch({type:'FETCH_REQUEST'});_context.prev=1;_context.next=4;return Axios.get(\"/api/users/sellers/\".concat(sellerId));case 4:_yield$Axios$get=_context.sent;_user=_yield$Axios$get.data;_context.next=8;return Axios.get(\"/api/products/sellers/\".concat(sellerId));case 8:_yield$Axios$get2=_context.sent;_products=_yield$Axios$get2.data;dispatch({type:'FETCH_SUCCESS',payload:{user:_user,products:_products}});_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](1);dispatch({type:'FETCH_FAIL',payload:getError(_context.t0)});case 16:case\"end\":return _context.stop();}}},_callee,null,[[1,13]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[dispatch,sellerId]);return loading?/*#__PURE__*/_jsx(LoadingBox,{}):error?/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(\"img\",{className:\"img-small\",src:user.seller.logo,alt:user.seller.name}),/*#__PURE__*/_jsxs(Card.Title,{children:[' ',/*#__PURE__*/_jsx(\"h1\",{children:user.seller.name})]}),/*#__PURE__*/_jsx(Rating,{rating:user.seller.rating,numReviews:user.seller.numReviews}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"mailto:\".concat(user.email),children:\"Contact Seller\"})}),/*#__PURE__*/_jsx(\"div\",{children:user.seller.description})]})})}),/*#__PURE__*/_jsxs(Col,{md:9,children:[products.length===0&&/*#__PURE__*/_jsx(MessageBox,{children:\"No Product Found\"}),/*#__PURE__*/_jsx(Row,{children:products.map(function(product){return/*#__PURE__*/_jsx(Col,{sm:6,lg:4,className:\"mb-3\",children:/*#__PURE__*/_jsx(Product,{product:product})},product._id);})})]})]});}","map":{"version":3,"sources":["/home/carlos/Documents/GitHub/mern-ecommerce/frontend/src/screens/SellerScreen.js"],"names":["Axios","React","useEffect","useReducer","Col","Card","Row","useParams","LoadingBox","MessageBox","Product","Rating","getError","reducer","state","action","type","loading","user","payload","products","error","SellerScreen","dispatch","params","sellerId","id","fetchData","get","data","seller","logo","name","rating","numReviews","email","description","length","map","product","_id"],"mappings":"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","sourcesContent":["import Axios from 'axios';\nimport React, { useEffect, useReducer } from 'react';\nimport Col from 'react-bootstrap/Col';\nimport Card from 'react-bootstrap/Card';\nimport Row from 'react-bootstrap/Row';\nimport { useParams } from 'react-router-dom';\nimport LoadingBox from '../components/LoadingBox';\nimport MessageBox from '../components/MessageBox';\nimport Product from '../components/Product';\nimport Rating from '../components/Rating';\nimport { getError } from '../utils';\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case 'FETCH_REQUEST':\n      return { ...state, loading: true };\n    case 'FETCH_SUCCESS':\n      return {\n        ...state,\n        user: action.payload.user,\n        products: action.payload.products,\n        loading: false,\n      };\n    case 'FETCH_FAIL':\n      return { ...state, loading: false, error: action.payload };\n    default:\n      return state;\n  }\n};\n\nexport default function SellerScreen() {\n  const [{ loading, error, products, user }, dispatch] = useReducer(reducer, {\n    loading: true,\n    error: '',\n  });\n\n  const params = useParams();\n  const { id: sellerId } = params;\n\n  useEffect(() => {\n    const fetchData = async () => {\n      dispatch({ type: 'FETCH_REQUEST' });\n      try {\n        const { data: user } = await Axios.get(\n          `/api/users/sellers/${sellerId}`\n        );\n        const { data: products } = await Axios.get(\n          `/api/products/sellers/${sellerId}`\n        );\n        dispatch({ type: 'FETCH_SUCCESS', payload: { user, products } });\n      } catch (error) {\n        dispatch({\n          type: 'FETCH_FAIL',\n          payload: getError(error),\n        });\n      }\n    };\n    fetchData();\n  }, [dispatch, sellerId]);\n\n  return loading ? (\n    <LoadingBox></LoadingBox>\n  ) : error ? (\n    <MessageBox variant=\"danger\">{error}</MessageBox>\n  ) : (\n    <Row>\n      <Col md={3}>\n        <Card>\n          <Card.Body>\n            <img\n              className=\"img-small\"\n              src={user.seller.logo}\n              alt={user.seller.name}\n            ></img>\n            <Card.Title>\n              {' '}\n              <h1>{user.seller.name}</h1>\n            </Card.Title>\n            <Rating\n              rating={user.seller.rating}\n              numReviews={user.seller.numReviews}\n            ></Rating>\n            <div>\n              <a href={`mailto:${user.email}`}>Contact Seller</a>\n            </div>\n            <div>{user.seller.description}</div>\n          </Card.Body>\n        </Card>\n      </Col>\n      <Col md={9}>\n        {products.length === 0 && <MessageBox>No Product Found</MessageBox>}\n        <Row>\n          {products.map((product) => (\n            <Col sm={6} lg={4} className=\"mb-3\" key={product._id}>\n              <Product product={product}></Product>\n            </Col>\n          ))}\n        </Row>\n      </Col>\n    </Row>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}